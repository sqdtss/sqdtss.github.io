<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>线段树模板题 hdu 1166: 敌兵布阵 | Space of Mr. Tan</title>
<meta name="keywords" content="algorithm" />
<meta name="description" content="Time Limit: 2000/1000 MS (Java/Others) Memory Limit: 65536/32768 K (Java/Others) Total Submission(s): 121643 Accepted Submission(s): 50879 Problem Description C国的死对头A国这段时间正在进行军事演习，所以C国间谍头子Derek和他手下Tidy又开始忙乎了。A国在">
<meta name="author" content="">
<link rel="canonical" href="https://sqdtss.github.io/posts/%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%A8%A1%E6%9D%BF%E9%A2%98hdu1166/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://sqdtss.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://sqdtss.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sqdtss.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://sqdtss.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://sqdtss.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.89.4" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="线段树模板题 hdu 1166: 敌兵布阵" />
<meta property="og:description" content="Time Limit: 2000/1000 MS (Java/Others) Memory Limit: 65536/32768 K (Java/Others) Total Submission(s): 121643 Accepted Submission(s): 50879 Problem Description C国的死对头A国这段时间正在进行军事演习，所以C国间谍头子Derek和他手下Tidy又开始忙乎了。A国在" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sqdtss.github.io/posts/%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%A8%A1%E6%9D%BF%E9%A2%98hdu1166/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-08-07T11:58:59&#43;08:00" />
<meta property="article:modified_time" content="2018-08-07T11:58:59&#43;08:00" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="线段树模板题 hdu 1166: 敌兵布阵"/>
<meta name="twitter:description" content="Time Limit: 2000/1000 MS (Java/Others) Memory Limit: 65536/32768 K (Java/Others) Total Submission(s): 121643 Accepted Submission(s): 50879 Problem Description C国的死对头A国这段时间正在进行军事演习，所以C国间谍头子Derek和他手下Tidy又开始忙乎了。A国在"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://sqdtss.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "线段树模板题 hdu 1166: 敌兵布阵",
      "item": "https://sqdtss.github.io/posts/%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%A8%A1%E6%9D%BF%E9%A2%98hdu1166/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "线段树模板题 hdu 1166: 敌兵布阵",
  "name": "线段树模板题 hdu 1166: 敌兵布阵",
  "description": "Time Limit: 2000/1000 MS (Java/Others) Memory Limit: 65536/32768 K (Java/Others) Total Submission(s): 121643 Accepted Submission(s): 50879 Problem Description C国的死对头A国这段时间正在进行军事演习，所以C国间谍头子Derek和他手下Tidy又开始忙乎了。A国在",
  "keywords": [
    "algorithm"
  ],
  "articleBody": "Time Limit: 2000/1000 MS (Java/Others) Memory Limit: 65536/32768 K (Java/Others) Total Submission(s): 121643 Accepted Submission(s): 50879 Problem Description C国的死对头A国这段时间正在进行军事演习，所以C国间谍头子Derek和他手下Tidy又开始忙乎了。A国在海岸线沿直线布置了N个工兵营地,Derek和Tidy的任务就是要监视这些工兵营地的活动情况。由于采取了某种先进的监测手段，所以每个工兵营地的人数C国都掌握的一清二楚,每个工兵营地的人数都有可能发生变动，可能增加或减少若干人手,但这些都逃不过C国的监视。 中央情报局要研究敌人究竟演习什么战术,所以Tidy要随时向Derek汇报某一段连续的工兵营地一共有多少人,例如Derek问:“Tidy,马上汇报第3个营地到第10个营地共有多少人!”Tidy就要马上开始计算这一段的总人数并汇报。但敌兵营地的人数经常变动，而Derek每次询问的段都不一样，所以Tidy不得不每次都一个一个营地的去数，很快就精疲力尽了，Derek对Tidy的计算速度越来越不满:“你个死肥仔，算得这么慢，我炒你鱿鱼!”Tidy想：“你自己来算算看，这可真是一项累人的工作!我恨不得你炒我鱿鱼呢!”无奈之下，Tidy只好打电话向计算机专家Windbreaker求救,Windbreaker说：“死肥仔，叫你平时做多点acm题和看多点算法书，现在尝到苦果了吧!”Tidy说：“我知错了。。。“但Windbreaker已经挂掉电话了。Tidy很苦恼，这么算他真的会崩溃的，聪明的读者，你能写个程序帮他完成这项工作吗？不过如果你的程序效率不够高的话，Tidy还是会受到Derek的责骂的.\nInput 第一行一个整数T，表示有T组数据。 每组数据第一行一个正整数N（N分析：此题为经典线段树题， 也可以用树状数组来写，注意线段树的题用scanf， printf， 因为操作可能输入数据较多， 容易超时。 线段树ac代码：\n#include using namespace std; const int N=100000+10; int t, n, p = 0; struct segTree{ int l, r; int v; }T[N*4]; void Build(int l, int r, int k){ T[k].l = l, T[k].r = r; if(l == r){ scanf(\"%d\", \u0026T[k].v); return; } int mid = (l+r)/2; Build(l, mid, k*2); Build(mid+1, r, k*2+1); T[k].v = T[k*2].v + T[k*2+1].v; } void Update(int c, int v, int k){ if(T[k].l == T[k].r \u0026\u0026 T[k].l == c){ T[k].v += v; return; } int mid = (T[k].l+T[k].r)/2; if(c  mid) Update(c, v, k*2); else Update(c, v, k*2+1); T[k].v = T[k*2].v + T[k*2+1].v; } int ans; void Query(int l, int r, int k){ if(l  T[k].r || r  T[k].l){ return; } if(l  T[k].l \u0026\u0026 r = T[k].r){ ans += T[k].v; return; } int mid = (T[k].l+T[k].r)/2; if(r  mid) Query(l, r, k*2); else if(l  mid) Query(l, r, k*2+1); else{ Query(l, mid, k*2); Query(mid+1, r, k*2+1); } } int main(){ scanf(\"%d\", \u0026t); while(t--){ scanf(\"%d\", \u0026n); Build(1, n, 1); char op[10]; printf(\"Case %d:\\n\", ++p); while(scanf(\"%s\", op), op[0] != 'E'){ int u, v; scanf(\"%d%d\", \u0026u, \u0026v); if(op[0] == 'A'){ Update(u, v, 1); } else if(op[0] == 'S'){ Update(u, -v, 1); } else{ ans = 0; Query(u, v, 1); printf(\"%d\\n\", ans); } } } } 树状数组ac代码：\n#include #include #include#define N 50005 using namespace std; int a[N],n; int lowbit(int x) { return x\u0026(-x); } void Insert(int i,int x) { while(in) { a[i]+=x; i+=lowbit(i); } } int getSum(int i) { int sum=0; while(i0) { sum+=a[i]; i-=lowbit(i); } return sum; } int main() { char s[10]; int t,Case=1,m,b; cint; while(t--) { cinn; memset(a,0,sizeof(a)); for(int i=1;in;i++) { int n; cinn; Insert(i,n); } printf(\"Case %d:\\n\",Case++); while(scanf(\"%s\",s),strcmp(s,\"End\")) { if(s[0]=='A') { cinmb; Insert(m,b); } else if(s[0]=='S') { cinmb; Insert(m,-b); } else if(s[0]=='Q') { cinmb; coutgetSum(b)-getSum(m-1)endl; } else break; } } return 0; } ",
  "wordCount" : "1415",
  "inLanguage": "zh-cn",
  "datePublished": "2018-08-07T11:58:59+08:00",
  "dateModified": "2018-08-07T11:58:59+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sqdtss.github.io/posts/%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%A8%A1%E6%9D%BF%E9%A2%98hdu1166/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Space of Mr. Tan",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sqdtss.github.io/favicon.ico"
    }
  }
}
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sqdtss.github.io/" accesskey="h" title="Space of Mr. Tan (Alt + H)">Space of Mr. Tan</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://sqdtss.github.io/posts/" title="HOME">
                    <span>HOME</span>
                </a>
            </li>
            <li>
                <a href="https://sqdtss.github.io/archives/" title="ARCHIVES">
                    <span>ARCHIVES</span>
                </a>
            </li>
            <li>
                <a href="https://sqdtss.github.io/tags/" title="TAGS">
                    <span>TAGS</span>
                </a>
            </li>
            <li>
                <a href="https://sqdtss.github.io/categories/" title="CATEGORIES">
                    <span>CATEGORIES</span>
                </a>
            </li>
            <li>
                <a href="https://sqdtss.github.io/about/" title="ABOUT">
                    <span>ABOUT</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      线段树模板题 hdu 1166: 敌兵布阵 
    </h1>
    <div class="post-meta"><span title='2018-08-07 11:58:59 +0800 CST'>August 7, 2018</span>&nbsp;·&nbsp;<span>&nbsp;字数：1415</span>

</div>
  </header> 
  <div class="post-content"><h4 id="time-limit-20001000-ms-javaothers----memory-limit-6553632768-k-javaothers">Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 65536/32768 K (Java/Others)<a hidden class="anchor" aria-hidden="true" href="#time-limit-20001000-ms-javaothers----memory-limit-6553632768-k-javaothers">#</a></h4>
<h4 id="total-submissions-121643----accepted-submissions-50879">Total Submission(s): 121643    Accepted Submission(s): 50879<a hidden class="anchor" aria-hidden="true" href="#total-submissions-121643----accepted-submissions-50879">#</a></h4>
<p>Problem Description
C国的死对头A国这段时间正在进行军事演习，所以C国间谍头子Derek和他手下Tidy又开始忙乎了。A国在海岸线沿直线布置了N个工兵营地,Derek和Tidy的任务就是要监视这些工兵营地的活动情况。由于采取了某种先进的监测手段，所以每个工兵营地的人数C国都掌握的一清二楚,每个工兵营地的人数都有可能发生变动，可能增加或减少若干人手,但这些都逃不过C国的监视。
中央情报局要研究敌人究竟演习什么战术,所以Tidy要随时向Derek汇报某一段连续的工兵营地一共有多少人,例如Derek问:“Tidy,马上汇报第3个营地到第10个营地共有多少人!”Tidy就要马上开始计算这一段的总人数并汇报。但敌兵营地的人数经常变动，而Derek每次询问的段都不一样，所以Tidy不得不每次都一个一个营地的去数，很快就精疲力尽了，Derek对Tidy的计算速度越来越不满:&ldquo;你个死肥仔，算得这么慢，我炒你鱿鱼!”Tidy想：“你自己来算算看，这可真是一项累人的工作!我恨不得你炒我鱿鱼呢!”无奈之下，Tidy只好打电话向计算机专家Windbreaker求救,Windbreaker说：“死肥仔，叫你平时做多点acm题和看多点算法书，现在尝到苦果了吧!”Tidy说：&ldquo;我知错了。。。&ldquo;但Windbreaker已经挂掉电话了。Tidy很苦恼，这么算他真的会崩溃的，聪明的读者，你能写个程序帮他完成这项工作吗？不过如果你的程序效率不够高的话，Tidy还是会受到Derek的责骂的.</p>
<pre tabindex="0"><code>Input
第一行一个整数T，表示有T组数据。
每组数据第一行一个正整数N（N&lt;=50000）,表示敌人有N个工兵营地，接下来有N个正整数,第i个正整数ai代表第i个工兵营地里开始时有ai个人（1&lt;=ai&lt;=50）。
接下来每行有一条命令，命令有4种形式：
(1) Add i j,i和j为正整数,表示第i个营地增加j个人（j不超过30）
(2)Sub i j ,i和j为正整数,表示第i个营地减少j个人（j不超过30）;
(3)Query i j ,i和j为正整数,i&lt;=j，表示询问第i到第j个营地的总人数;
(4)End 表示结束，这条命令在每组数据最后出现;
每组数据最多有40000条命令
 
Output
对第i组数据,首先输出“Case i:”和回车,
对于每个Query询问，输出一个整数并回车,表示询问的段中的总人数,这个数保持在int以内。

Sample Input
1 10 1 2 3 4 5 6 7 8 9 10 Query 1 3 Add 3 6 Query 2 7 Sub 10 2 Add 6 3 Query 3 10 End
 
Sample Output
Case 1: 6 33 59
</code></pre><p>分析：此题为经典线段树题， 也可以用树状数组来写，注意线段树的题用scanf， printf， 因为操作可能输入数据较多， 容易超时。
线段树ac代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C++" data-lang="C++"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;bits/stdc++.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> N<span style="color:#f92672">=</span><span style="color:#ae81ff">100000</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>;
<span style="color:#66d9ef">int</span> t, n, p <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">segTree</span>{
    <span style="color:#66d9ef">int</span> l, r;
    <span style="color:#66d9ef">int</span> v;
}T[N<span style="color:#f92672">*</span><span style="color:#ae81ff">4</span>];

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Build</span>(<span style="color:#66d9ef">int</span> l, <span style="color:#66d9ef">int</span> r, <span style="color:#66d9ef">int</span> k){
    T[k].l <span style="color:#f92672">=</span> l, T[k].r <span style="color:#f92672">=</span> r;
    <span style="color:#66d9ef">if</span>(l <span style="color:#f92672">==</span> r){
        scanf(<span style="color:#e6db74">&#34;%d&#34;</span>, <span style="color:#f92672">&amp;</span>T[k].v);
        <span style="color:#66d9ef">return</span>;
    }
    <span style="color:#66d9ef">int</span> mid <span style="color:#f92672">=</span> (l<span style="color:#f92672">+</span>r)<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>;
    Build(l, mid, k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>);
    Build(mid<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, r, k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);
    T[k].v <span style="color:#f92672">=</span> T[k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>].v <span style="color:#f92672">+</span> T[k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>].v;
}

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Update</span>(<span style="color:#66d9ef">int</span> c, <span style="color:#66d9ef">int</span> v, <span style="color:#66d9ef">int</span> k){
    <span style="color:#66d9ef">if</span>(T[k].l <span style="color:#f92672">==</span> T[k].r <span style="color:#f92672">&amp;&amp;</span> T[k].l <span style="color:#f92672">==</span> c){
        T[k].v <span style="color:#f92672">+=</span> v;
        <span style="color:#66d9ef">return</span>;
    }
    <span style="color:#66d9ef">int</span> mid <span style="color:#f92672">=</span> (T[k].l<span style="color:#f92672">+</span>T[k].r)<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>;
    <span style="color:#66d9ef">if</span>(c <span style="color:#f92672">&lt;=</span> mid) Update(c, v, k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>);
    <span style="color:#66d9ef">else</span> Update(c, v, k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);
    T[k].v <span style="color:#f92672">=</span> T[k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>].v <span style="color:#f92672">+</span> T[k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>].v;
}

<span style="color:#66d9ef">int</span> ans;
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Query</span>(<span style="color:#66d9ef">int</span> l, <span style="color:#66d9ef">int</span> r, <span style="color:#66d9ef">int</span> k){
    <span style="color:#66d9ef">if</span>(l <span style="color:#f92672">&gt;</span> T[k].r <span style="color:#f92672">||</span> r <span style="color:#f92672">&lt;</span> T[k].l){
        <span style="color:#66d9ef">return</span>;
    }
    <span style="color:#66d9ef">if</span>(l <span style="color:#f92672">&lt;=</span> T[k].l <span style="color:#f92672">&amp;&amp;</span> r <span style="color:#f92672">&gt;=</span> T[k].r){
        ans <span style="color:#f92672">+=</span> T[k].v;
        <span style="color:#66d9ef">return</span>;
    }
    <span style="color:#66d9ef">int</span> mid <span style="color:#f92672">=</span> (T[k].l<span style="color:#f92672">+</span>T[k].r)<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>;
    <span style="color:#66d9ef">if</span>(r <span style="color:#f92672">&lt;</span> mid) Query(l, r, k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>);
    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(l <span style="color:#f92672">&gt;</span> mid) Query(l, r, k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);
    <span style="color:#66d9ef">else</span>{
        Query(l, mid, k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>);
        Query(mid<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, r, k<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);
    }
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){
    scanf(<span style="color:#e6db74">&#34;%d&#34;</span>, <span style="color:#f92672">&amp;</span>t);
    <span style="color:#66d9ef">while</span>(t<span style="color:#f92672">--</span>){
        scanf(<span style="color:#e6db74">&#34;%d&#34;</span>, <span style="color:#f92672">&amp;</span>n);
        Build(<span style="color:#ae81ff">1</span>, n, <span style="color:#ae81ff">1</span>);
        <span style="color:#66d9ef">char</span> op[<span style="color:#ae81ff">10</span>];
        printf(<span style="color:#e6db74">&#34;Case %d:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">++</span>p);
        <span style="color:#66d9ef">while</span>(scanf(<span style="color:#e6db74">&#34;%s&#34;</span>, op), op[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;E&#39;</span>){
            <span style="color:#66d9ef">int</span> u, v;
            scanf(<span style="color:#e6db74">&#34;%d%d&#34;</span>, <span style="color:#f92672">&amp;</span>u, <span style="color:#f92672">&amp;</span>v);
            <span style="color:#66d9ef">if</span>(op[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;A&#39;</span>){
                Update(u, v, <span style="color:#ae81ff">1</span>);
            }
            <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(op[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;S&#39;</span>){
                Update(u, <span style="color:#f92672">-</span>v, <span style="color:#ae81ff">1</span>);
            }
            <span style="color:#66d9ef">else</span>{
                ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
                Query(u, v, <span style="color:#ae81ff">1</span>);
                printf(<span style="color:#e6db74">&#34;%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, ans);
            }
        }
    }
}
</code></pre></div><p>树状数组ac代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C++" data-lang="C++"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;cstdio&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span> <span style="color:#75715e">#include</span><span style="color:#75715e">&lt;cstring&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#define N 50005
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">int</span> a[N],n;
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">lowbit</span>(<span style="color:#66d9ef">int</span> x)
{
    <span style="color:#66d9ef">return</span> x<span style="color:#f92672">&amp;</span>(<span style="color:#f92672">-</span>x);
}
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Insert</span>(<span style="color:#66d9ef">int</span> i,<span style="color:#66d9ef">int</span> x)
{
    <span style="color:#66d9ef">while</span>(i<span style="color:#f92672">&lt;=</span>n)
    {
        a[i]<span style="color:#f92672">+=</span>x;
        i<span style="color:#f92672">+=</span>lowbit(i);
    }
}
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getSum</span>(<span style="color:#66d9ef">int</span> i)
{
    <span style="color:#66d9ef">int</span> sum<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">while</span>(i<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span>)
    {
        sum<span style="color:#f92672">+=</span>a[i];
        i<span style="color:#f92672">-=</span>lowbit(i);
    }
    <span style="color:#66d9ef">return</span> sum;
}
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
    <span style="color:#66d9ef">char</span> s[<span style="color:#ae81ff">10</span>];
    <span style="color:#66d9ef">int</span> t,Case<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>,m,b;
    cin<span style="color:#f92672">&gt;&gt;</span>t;
    <span style="color:#66d9ef">while</span>(t<span style="color:#f92672">--</span>)
    {
        cin<span style="color:#f92672">&gt;&gt;</span>n;
        memset(a,<span style="color:#ae81ff">0</span>,<span style="color:#66d9ef">sizeof</span>(a));
        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;i<span style="color:#f92672">&lt;=</span>n;i<span style="color:#f92672">++</span>)
        {
            <span style="color:#66d9ef">int</span> n;
            cin<span style="color:#f92672">&gt;&gt;</span>n;
            Insert(i,n);
        }
         printf(<span style="color:#e6db74">&#34;Case %d:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>,Case<span style="color:#f92672">++</span>); 
        <span style="color:#66d9ef">while</span>(scanf(<span style="color:#e6db74">&#34;%s&#34;</span>,s),strcmp(s,<span style="color:#e6db74">&#34;End&#34;</span>))  
        {  
             
            <span style="color:#66d9ef">if</span>(s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;A&#39;</span>)
            {
                cin<span style="color:#f92672">&gt;&gt;</span>m<span style="color:#f92672">&gt;&gt;</span>b;
                Insert(m,b);
            }
            <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;S&#39;</span>)
            {
                cin<span style="color:#f92672">&gt;&gt;</span>m<span style="color:#f92672">&gt;&gt;</span>b;
                Insert(m,<span style="color:#f92672">-</span>b);
            }
            <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Q&#39;</span>)
            {
                 cin<span style="color:#f92672">&gt;&gt;</span>m<span style="color:#f92672">&gt;&gt;</span>b;
                 cout<span style="color:#f92672">&lt;&lt;</span>getSum(b)<span style="color:#f92672">-</span>getSum(m<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">&lt;&lt;</span>endl;
            }
            <span style="color:#66d9ef">else</span>
                <span style="color:#66d9ef">break</span>;
        }
    }
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://sqdtss.github.io/tags/algorithm/">algorithm</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://sqdtss.github.io/">Space of Mr. Tan</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
